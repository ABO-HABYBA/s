<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إنشاء باركود للبيانات الشخصية</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            direction: rtl;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px;
        }
        form {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
        }
        label, input, textarea {
            display: block;
            width: 100%;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        input[type="text"], input[type="email"], textarea {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 100%;
        }
        input[type="button"], button {
            background-color: #004f4f;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
        }
        input[type="button"]:hover, button:hover {
            background-color: #003b3b;
        }
        #barcode {
            margin-top: 20px;
        }
        .social-inputs input {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>إنشاء باركود للبيانات الشخصية</h1>

    <form id="barcodeForm">
        <label for="name">الاسم:</label>
        <input type="text" id="name" placeholder="أدخل اسمك" required>

        <label for="email">البريد الإلكتروني:</label>
        <input type="email" id="email" placeholder="أدخل بريدك الإلكتروني" required>

        <label for="phone">رقم الهاتف:</label>
        <input type="text" id="phone" placeholder="أدخل رقم هاتفك" required>

        <label for="mobile">رقم الموبايل:</label>
        <input type="text" id="mobile" placeholder="أدخل رقم موبايلك" required>

        <label for="address">العنوان:</label>
        <textarea id="address" placeholder="أدخل عنوانك" required></textarea>

        <label for="additional-address">عنوان إضافي (اختياري):</label>
        <textarea id="additional-address" placeholder="أدخل عنوان إضافي (إذا وُجد)"></textarea>

        <label for="website">الموقع الإلكتروني:</label>
        <input type="text" id="website" placeholder="أدخل رابط موقعك الإلكتروني" required>

        <h3>روابط التواصل الاجتماعي</h3>
        <div class="social-inputs">
            <label for="facebook">فيسبوك:</label>
            <input type="text" id="facebook" placeholder="رابط حساب فيسبوك">

            <label for="whatsapp">واتساب:</label>
            <input type="text" id="whatsapp" placeholder="رابط واتساب">

            <label for="x">إكس (تويتر سابقاً):</label>
            <input type="text" id="x" placeholder="رابط حساب إكس">

            <label for="instagram">إنستجرام:</label>
            <input type="text" id="instagram" placeholder="رابط حساب إنستجرام">
        </div>

        <input type="button" value="إنشاء الباركود" onclick="generateBarcode()">
        <button type="button" onclick="downloadBarcode()">تنزيل الباركود</button>
    </form>

    <svg id="barcode"></svg>

    <script>
        function generateBarcode() {
            // الحصول على البيانات من النموذج
            var name = document.getElementById('name').value;
            var email = document.getElementById('email').value;
            var phone = document.getElementById('phone').value;
            var mobile = document.getElementById('mobile').value;
            var address = document.getElementById('address').value;
            var additionalAddress = document.getElementById('additional-address').value;
            var website = document.getElementById('website').value;
            var facebook = document.getElementById('facebook').value;
            var whatsapp = document.getElementById('whatsapp').value;
            var x = document.getElementById('x').value;
            var instagram = document.getElementById('instagram').value;

            // دمج البيانات في سلسلة نصية واحدة
            var personalData = 
                'الاسم: ' + name + '\n' +
                'البريد الإلكتروني: ' + email + '\n' +
                'رقم الهاتف: ' + phone + '\n' +
                'رقم الموبايل: ' + mobile + '\n' +
                'العنوان: ' + address + '\n' +
                (additionalAddress ? 'عنوان إضافي: ' + additionalAddress + '\n' : '') +
                'الموقع الإلكتروني: ' + website + '\n' +
                (facebook ? 'فيسبوك: ' + facebook + '\n' : '') +
                (whatsapp ? 'واتساب: ' + whatsapp + '\n' : '') +
                (x ? 'إكس: ' + x + '\n' : '') +
                (instagram ? 'إنستجرام: ' + instagram + '\n' : '');

            // إنشاء الباركود باستخدام JsBarcode
            JsBarcode("#barcode", personalData, {
                format: "CODE128", // صيغة الباركود
                lineColor: "#000",
                width: 2,
                height: 100,
                displayValue: false
            });
        }

        function downloadBarcode() {
            // الحصول على عنصر الباركود
            var barcode = document.querySelector("#barcode");

            // تحويل الباركود إلى صورة بيانات (Data URL)
            var barcodeImage = barcode.querySelector('image');
            var imageUrl = barcodeImage ? barcodeImage.getAttribute('href') : '';

            // إذا كان هناك صورة
            if (imageUrl) {
                // إنشاء رابط لتنزيل الصورة
                var link = document.createElement('a');
                link.href = imageUrl;
                link.download = 'barcode.png'; // اسم الملف عند تنزيله
                link.click(); // محاكاة النقر على الرابط لتنزيل الصورة
            } else {
                alert('يرجى أولاً إنشاء الباركود قبل محاولة تنزيله.');
            }
        }
    </script>
</body>
</html>
